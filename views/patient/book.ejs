<!DOCTYPE html>
<html>
<head>
    <title>Book Appointment</title>
    <link rel="stylesheet" href="/styles.css">
</head>

<body>

<header>
    <h1>Book Appointment</h1>
    <nav>
        <a href="/patient/dashboard">Dashboard</a>
        <a href="/patient/search">Search Appointments</a>
        <a href="/auth/logout">Logout</a>
    </nav>
</header>

<main>

    <% if (error) { %>
        <div class="error">
            <p><%= error %></p>
        </div>
    <% } %>

    <p class="page-description">
        Use the form below to book a new appointment with a staff member. Select the desired staff from the dropdown, choose a date and time that works for you, and provide a reason for the appointment.

    <form action="/patient/book" method="POST">

        <label for="staff_id">Choose a staff member:</label>
        <select name="staff_id" id="staff_id" required>
            <% staffList.forEach(staff => { %>
                <option value="<%= staff.id %>">
                    <%= staff.first_name %> <%= staff.last_name %> 
                    - <%= staff.role_title %>
                </option>
            <% }) %>
        </select>

        <label for="appointment_date">Date and Time:</label>
        <input 
            type="datetime-local" 
            name="appointment_date" 
            id="appointment_date" 
            required
            min="<%= new Date().toISOString().slice(0,16) %>"
        >

        <label for="reason">Reason:</label>
        <input type="text" name="reason" id="reason" required>

        <button type="submit">Book Appointment</button>
    </form>

</main>

</body>
</html>
